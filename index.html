<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Alex Pandian - Software Developer</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #4285f4;
            --primary-hover: #3367d6;
            --secondary-color: #34a853;
            --accent-color: #ea4335;
            --warning-color: #fbbc04;
            --project-color: #673ab7; /* Purple color for projects button */
            
            --bg-primary: #ffffff;
            --bg-secondary: #f8f9fa;
            --bg-tertiary: #e8f0fe;
            --bg-sidebar: #f8f9fa;
            --bg-input: #ffffff;
            
            --text-primary: #202124;
            --text-secondary: #5f6368;
            --text-tertiary: #80868b;
            
            --border-color: #dadce0;
            --border-light: #e8eaed;
            
            --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
            --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0,0,0,0.1);
            
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 20px;
            
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-fast: all 0.15s cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            --primary-color: #8ab4f8;
            --primary-hover: #aecbfa;
            --secondary-color: #81c995;
            --accent-color: #f28b82;
            --warning-color: #fdd663;
            --project-color: #9575cd;
            
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #3c3c3c;
            --bg-sidebar: #252525;
            --bg-input: #2d2d2d;
            
            --text-primary: #e8eaed;
            --text-secondary: #9aa0a6;
            --text-tertiary: #80868b;
            
            --border-color: #3c4043;
            --border-light: #5f6368;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.5;
            overflow-x: hidden;
            transition: var(--transition);
        }

        /* Landing Page Styles */
        .landing-page {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            position: relative;
            overflow: hidden;
        }

        .landing-header {
            padding: 20px;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .landing-logo {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 10px;
        }

        .landing-logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .landing-logo h1 {
            font-size: 24px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .landing-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            position: relative;
            z-index: 2;
        }

        .landing-hero {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            max-width: 900px;
            width: 100%;
        }

        .landing-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: white;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: var(--primary-color);
            box-shadow: var(--shadow-xl);
            position: relative;
            overflow: hidden;
        }

        .landing-avatar::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .landing-title {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
        }

        .landing-subtitle {
            font-size: 18px;
            color: var(--text-secondary);
            margin-bottom: 40px;
            text-align: center;
            max-width: 600px;
        }

        .landing-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-bottom: 40px;
        }

        .landing-button {
            padding: 16px 32px;
            border-radius: var(--radius-lg);
            font-size: 18px;
            font-weight: 600;
            text-decoration: none;
            color: white;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
            min-width: 200px;
            justify-content: center;
        }

        .landing-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .landing-button:hover::before {
            transform: translateX(0);
        }

        .landing-button:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .portfolio-btn {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-hover));
        }

        .chat-btn {
            background: linear-gradient(135deg, var(--secondary-color), #2e7d32);
        }

        .projects-btn {
            background: linear-gradient(135deg, var(--project-color), #512da8);
        }

        .landing-footer {
            padding: 20px;
            text-align: center;
            color: var(--text-secondary);
            position: relative;
            z-index: 2;
        }

        .social-links {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 15px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            transition: var(--transition);
            box-shadow: var(--shadow-md);
        }

        .social-link:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .ai-image-container {
            width: 100%;
            max-width: 500px;
            margin: 20px auto;
            text-align: center;
        }

        .ai-image {
            width: 100%;
            height: auto;
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            transition: var(--transition);
        }

        .ai-image:hover {
            transform: scale(1.02);
        }

        .bg-shapes {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            opacity: 0.1;
        }

        .shape-1 {
            width: 300px;
            height: 300px;
            background: var(--primary-color);
            top: -100px;
            right: -100px;
            animation: float 6s ease-in-out infinite;
        }

        .shape-2 {
            width: 200px;
            height: 200px;
            background: var(--secondary-color);
            bottom: -50px;
            left: -50px;
            animation: float 8s ease-in-out infinite;
        }

        .shape-3 {
            width: 150px;
            height: 150px;
            background: var(--accent-color);
            top: 50%;
            left: 10%;
            animation: float 7s ease-in-out infinite;
        }

        /* Container Layout */
        .container {
            display: flex;
            height: 100vh;
            position: relative;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-light);
            display: flex;
            flex-direction: column;
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            z-index: 1000;
            box-shadow: var(--shadow-lg);
        }

        .sidebar-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-light);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            color: white;
            transition: var(--transition);
        }

        .logo:hover .logo-icon {
            transform: rotate(10deg) scale(1.1);
        }

        .logo h2 {
            font-size: 18px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .new-chat-btn {
            width: 100%;
            padding: 12px 16px;
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .new-chat-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .new-chat-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .new-chat-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .portfolio-btn-sidebar {
            width: 100%;
            padding: 12px 16px;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            color: white;
            border: none;
            border-radius: var(--radius-md);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
            justify-content: center;
            position: relative;
            overflow: hidden;
            margin-top: 10px;
        }

        .portfolio-btn-sidebar::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .portfolio-btn-sidebar:hover::before {
            width: 300px;
            height: 300px;
        }

        .portfolio-btn-sidebar:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .chat-history {
            flex: 1;
            padding: 16px;
            overflow-y: auto;
        }

        .history-title {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 12px;
        }

        .chat-item {
            padding: 12px 16px;
            margin: 4px 0;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 14px;
            color: var(--text-secondary);
            transition: var(--transition);
            border: 1px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .chat-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 3px;
            background: var(--primary-color);
            transform: scaleY(0);
            transition: transform 0.3s;
        }

        .chat-item:hover::before {
            transform: scaleY(1);
        }

        .chat-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            padding-left: 20px;
        }

        .chat-item.active {
            background: var(--bg-tertiary);
            color: var(--primary-color);
            border-color: var(--primary-color);
        }

        .sidebar-footer {
            padding: 16px;
            border-top: 1px solid var(--border-light);
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px;
            border-radius: var(--radius-md);
            transition: var(--transition);
        }

        .user-section:hover {
            background: var(--bg-tertiary);
        }

        .user-avatar {
            width: 36px;
            height: 36px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            transition: var(--transition);
        }

        .user-section:hover .user-avatar {
            transform: scale(1.1);
        }

        .user-info {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .user-name {
            font-weight: 500;
            font-size: 14px;
        }

        .user-status {
            font-size: 12px;
            color: var(--text-secondary);
        }

        .settings-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .settings-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            transform: rotate(15deg);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: var(--bg-primary);
            position: relative;
        }

        .chat-header {
            padding: 12px 20px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--bg-primary);
            backdrop-filter: blur(10px);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .mobile-toggle {
            display: none;
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .mobile-toggle:hover {
            background: var(--bg-secondary);
        }

        .header-center {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .header-center h1 {
            font-size: 18px;
            font-weight: 600;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .status-dot {
            width: 6px;
            height: 6px;
            background: var(--secondary-color);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
        }

        .header-actions {
            display: flex;
            gap: 8px;
        }

        .theme-toggle, .voice-toggle, .export-btn {
            background: none;
            border: none;
            color: var(--text-primary);
            font-size: 16px;
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .theme-toggle:hover, .voice-toggle:hover, .export-btn:hover {
            background: var(--bg-secondary);
            transform: rotate(15deg);
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .welcome-section {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60vh;
            animation: fadeInUp 0.6s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-card {
            text-align: center;
            max-width: 600px;
            padding: 40px 20px;
        }

        .welcome-icon {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            font-size: 32px;
            color: white;
            box-shadow: var(--shadow-lg);
            animation: float 3s ease-in-out infinite;
        }

        .welcome-card h1 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--text-primary), var(--primary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .welcome-card p {
            font-size: 16px;
            color: var(--text-secondary);
            margin-bottom: 32px;
        }

        .quick-actions {
            margin-top: 32px;
        }

        .action-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            max-width: 400px;
            margin: 0 auto;
        }

        .action-card {
            padding: 16px 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: var(--transition);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .action-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--bg-tertiary);
            transform: translateY(100%);
            transition: transform 0.3s;
            z-index: 0;
        }

        .action-card:hover::before {
            transform: translateY(0);
        }

        .action-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary-color);
        }

        .action-card:hover .action-icon {
            transform: scale(1.1);
        }

        .action-icon {
            width: 40px;
            height: 40px;
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            color: var(--primary-color);
            font-size: 16px;
            transition: var(--transition);
            position: relative;
            z-index: 1;
        }

        .action-card span {
            font-size: 12px;
            font-weight: 500;
            color: var(--text-primary);
            position: relative;
            z-index: 1;
        }

        /* Message Styles */
        .message {
            display: flex;
            gap: 16px;
            padding: 20px;
            max-width: 100%;
            animation: messageSlide 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            margin: 8px 0;
            position: relative;
        }

        .message.assistant {
            background: transparent;
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            flex-shrink: 0;
            margin-top: 4px;
            transition: var(--transition);
        }

        .message:hover .avatar {
            transform: scale(1.1);
        }

        .user .avatar {
            background: var(--primary-color);
            color: white;
        }

        .assistant .avatar {
            background: var(--secondary-color);
            color: white;
        }

        .message-content {
            flex: 1;
            line-height: 1.6;
            font-size: 15px;
        }

        .message-content img {
            max-width: 100%;
            border-radius: var(--radius-md);
            margin: 12px 0;
            box-shadow: var(--shadow-md);
            transition: var(--transition);
        }

        .message-content img:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-lg);
        }

        .message-actions {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .message:hover .message-actions {
            opacity: 1;
        }

        .message-action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 4px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            transition: var(--transition);
        }

        .message-action-btn:hover {
            color: var(--primary-color);
            background: var(--bg-tertiary);
        }

        .message-timestamp {
            font-size: 11px;
            color: var(--text-tertiary);
            margin-top: 4px;
        }

        /* Input Section */
        .input-section {
            padding: 20px;
            border-top: 1px solid var(--border-light);
            background: var(--bg-primary);
        }

        .file-preview {
            display: flex;
            gap: 8px;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .file-preview-item {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            border-radius: 20px;
            font-size: 12px;
            color: var(--text-primary);
            animation: fadeIn 0.3s ease;
        }

        .file-preview-item .remove-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 2px;
            border-radius: 50%;
            transition: var(--transition);
        }

        .file-preview-item .remove-btn:hover {
            color: var(--accent-color);
            background: var(--bg-tertiary);
        }

        .input-container {
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: 12px 16px;
            transition: var(--transition);
            box-shadow: var(--shadow-sm);
        }

        .input-container:focus-within {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.1);
        }

        .input-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 8px;
        }

        .action-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
            font-size: 16px;
            position: relative;
        }

        .action-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
            transform: translateY(-2px);
        }

        .action-btn.active {
            color: var(--primary-color);
        }

        .text-input-wrapper {
            display: flex;
            align-items: flex-end;
            gap: 12px;
        }

        #messageInput {
            flex: 1;
            border: none;
            background: none;
            color: var(--text-primary);
            font-size: 16px;
            resize: none;
            max-height: 120px;
            min-height: 24px;
            line-height: 1.5;
            outline: none;
            font-family: inherit;
        }

        #messageInput::placeholder {
            color: var(--text-tertiary);
        }

        .send-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            width: 36px;
            height: 36px;
            font-size: 14px;
            position: relative;
            overflow: hidden;
        }

        .send-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .send-btn:hover::before {
            width: 100px;
            height: 100px;
        }

        .send-btn:hover:not(:disabled) {
            background: var(--primary-hover);
            transform: scale(1.05);
        }

        .send-btn:disabled {
            background: var(--text-tertiary);
            cursor: not-allowed;
            transform: none;
        }

        .disclaimer {
            text-align: center;
            margin-top: 12px;
        }

        .disclaimer p {
            font-size: 12px;
            color: var(--text-secondary);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .camera-modal {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            max-width: 90vw;
            width: 400px;
            overflow: hidden;
            animation: modalFadeIn 0.3s ease;
        }

        @keyframes modalFadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .modal-header h3 {
            font-size: 18px;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 8px;
            border-radius: var(--radius-sm);
            transition: var(--transition);
        }

        .close-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .modal-body {
            padding: 20px;
        }

        .camera-container {
            position: relative;
            border-radius: var(--radius-md);
            overflow: hidden;
            background: #000;
        }

        #video {
            width: 100%;
            height: 300px;
            object-fit: cover;
        }

        .camera-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .camera-frame {
            width: 80%;
            height: 60%;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: var(--radius-md);
        }

        .modal-footer {
            padding: 20px;
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .capture-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary-color);
            border: 4px solid var(--bg-primary);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
        }

        .capture-btn:hover {
            transform: scale(1.1);
            background: var(--primary-hover);
        }

        .btn-primary, .btn-secondary {
            padding: 12px 24px;
            border: none;
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-hover);
        }

        .btn-secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-light);
        }

        .btn-secondary:hover {
            background: var(--bg-tertiary);
        }

        /* Loading Animation */
        .typing-indicator {
            display: inline-flex;
            gap: 4px;
            align-items: center;
            padding: 12px 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: var(--text-secondary);
            border-radius: 50%;
            animation: typingBounce 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typingBounce {
            0%, 80%, 100% { 
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% { 
                transform: scale(1.2);
                opacity: 1;
            }
        }

        /* Voice Recording Indicator */
        .voice-recording {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--accent-color);
            color: white;
            border-radius: var(--radius-md);
            font-size: 12px;
            animation: pulse 1.5s infinite;
        }

        .voice-recording i {
            animation: pulse 1.5s infinite;
        }

        /* Portfolio Modal Styles */
        .portfolio-modal {
            background: var(--bg-primary);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            max-width: 95vw;
            width: 900px;
            max-height: 90vh;
            overflow: hidden;
            animation: modalFadeIn 0.3s ease;
            display: flex;
            flex-direction: column;
        }

        .portfolio-body {
            padding: 0;
            overflow-y: auto;
            flex: 1;
        }

        .portfolio-hero {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            padding: 40px;
            color: white;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .portfolio-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="%23ffffff" fill-opacity="0.1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,122.7C672,117,768,139,864,154.7C960,171,1056,181,1152,165.3C1248,149,1344,107,1392,85.3L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path></svg>') no-repeat bottom;
            background-size: cover;
        }

        .portfolio-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: white;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: var(--primary-color);
            box-shadow: var(--shadow-xl);
            position: relative;
            z-index: 1;
        }

        .portfolio-hero h1 {
            font-size: 36px;
            font-weight: 700;
            margin-bottom: 8px;
            position: relative;
            z-index: 1;
        }

        .portfolio-hero p {
            font-size: 18px;
            opacity: 0.9;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        .portfolio-content {
            padding: 40px;
        }

        .portfolio-section {
            margin-bottom: 40px;
        }

        .portfolio-section h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .portfolio-section h2 i {
            color: var(--primary-color);
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
        }

        .skill-item {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 15px;
            text-align: center;
            transition: var(--transition);
            border: 1px solid var(--border-light);
        }

        .skill-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-md);
            background: var(--bg-tertiary);
        }

        .skill-icon {
            font-size: 24px;
            color: var(--primary-color);
            margin-bottom: 8px;
        }

        .skill-name {
            font-weight: 500;
            font-size: 14px;
        }

        .experience-item, .project-item {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid var(--primary-color);
            transition: var(--transition);
        }

        .experience-item:hover, .project-item:hover {
            transform: translateX(5px);
            box-shadow: var(--shadow-md);
        }

        .experience-header, .project-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .experience-title, .project-title {
            font-weight: 600;
            font-size: 18px;
            color: var(--text-primary);
        }

        .experience-duration, .project-tech {
            color: var(--text-secondary);
            font-size: 14px;
        }

        .experience-company, .project-description {
            color: var(--text-secondary);
            margin-bottom: 10px;
        }

        .experience-details, .project-details {
            color: var(--text-primary);
        }

        .project-links {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .project-link {
            display: inline-flex;
            align-items: center;
            gap: 5px;
            padding: 8px 15px;
            background: var(--primary-color);
            color: white;
            border-radius: var(--radius-md);
            text-decoration: none;
            font-size: 14px;
            transition: var(--transition);
        }

        .project-link:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
        }

        .contact-info {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
        }

        .contact-item i {
            color: var(--primary-color);
        }

        /* Contact Form Styles */
        .contact-form {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 30px;
            margin-top: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 16px;
            transition: var(--transition);
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.1);
        }

        textarea.form-control {
            resize: vertical;
            min-height: 120px;
        }

        .form-submit {
            background: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--radius-md);
            padding: 12px 24px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .form-submit:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
        }

        .portfolio-footer {
            padding: 20px 40px;
            background: var(--bg-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .download-btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 20px;
            background: var(--primary-color);
            color: white;
            border-radius: var(--radius-md);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition);
        }

        .download-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
        }

        .social-links {
            display: flex;
            gap: 15px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--bg-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-color);
            transition: var(--transition);
        }

        .social-link:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-md);
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .landing-title {
                font-size: 28px;
            }
            
            .landing-subtitle {
                font-size: 16px;
            }
            
            .landing-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .landing-button {
                width: 100%;
                max-width: 300px;
            }
            
            .container {
                height: 100vh;
                height: 100dvh; /* Dynamic viewport height for mobile */
            }
            
            .sidebar {
                position: fixed;
                top: 0;
                left: 0;
                height: 100%;
                transform: translateX(-100%);
                width: 85%;
                max-width: 300px;
                box-shadow: var(--shadow-xl);
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .sidebar-overlay {
                display: none;
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                backdrop-filter: blur(2px);
                z-index: 999;
            }
            
            .sidebar-overlay.active {
                display: block;
            }
            
            .mobile-toggle {
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .chat-header {
                padding: 12px 16px;
            }
            
            .header-center h1 {
                font-size: 16px;
            }
            
            .status-indicator span {
                display: none;
            }
            
            .chat-container {
                padding: 16px;
            }
            
            .welcome-card {
                padding: 20px 0;
            }
            
            .welcome-card h1 {
                font-size: 24px;
            }
            
            .welcome-icon {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            .action-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
            
            .action-card {
                padding: 12px 8px;
            }
            
            .action-icon {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }
            
            .message {
                padding: 16px;
                gap: 12px;
            }
            
            .avatar {
                width: 28px;
                height: 28px;
                font-size: 12px;
            }
            
            .input-section {
                padding: 16px;
            }
            
            .input-container {
                padding: 12px;
            }
            
            .text-input-wrapper {
                gap: 8px;
            }
            
            #messageInput {
                font-size: 16px; /* Prevents zoom on iOS */
            }
            
            .camera-modal {
                width: 95vw;
                margin: 20px;
            }
            
            #video {
                height: 250px;
            }
            
            /* Portfolio Modal Mobile Styles */
            .portfolio-modal {
                width: 95vw;
                max-height: 95vh;
            }
            
            .portfolio-hero {
                padding: 30px 20px;
            }
            
            .portfolio-hero h1 {
                font-size: 28px;
            }
            
            .portfolio-hero p {
                font-size: 16px;
            }
            
            .portfolio-content {
                padding: 20px;
            }
            
            .portfolio-section h2 {
                font-size: 20px;
            }
            
            .skills-grid {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
            
            .experience-header, .project-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
            
            .portfolio-footer {
                flex-direction: column;
                gap: 15px;
                padding: 15px 20px;
            }
            
            .contact-form {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .landing-title {
                font-size: 24px;
            }
            
            .landing-subtitle {
                font-size: 14px;
            }
            
            .landing-avatar {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }
            
            .chat-container {
                padding: 12px;
            }
            
            .message {
                padding: 12px;
            }
            
            .welcome-card h1 {
                font-size: 20px;
            }
            
            .action-grid {
                grid-template-columns: 1fr;
            }
            
            .input-actions {
                justify-content: center;
            }
            
            .disclaimer p {
                font-size: 11px;
            }
            
            .portfolio-hero h1 {
                font-size: 24px;
            }
            
            .portfolio-content {
                padding: 15px;
            }
            
            .contact-form {
                padding: 15px;
            }
        }

        /* Safe area insets for notch phones */
        @supports(padding: max(0px)) {
            .container {
                padding-left: max(0px, env(safe-area-inset-left));
                padding-right: max(0px, env(safe-area-inset-right));
                padding-bottom: max(0px, env(safe-area-inset-bottom));
            }
        }

        /* Hide scrollbars but keep functionality */
        .chat-container::-webkit-scrollbar,
        .chat-history::-webkit-scrollbar,
        .portfolio-body::-webkit-scrollbar {
            width: 4px;
        }

        .chat-container::-webkit-scrollbar-track,
        .chat-history::-webkit-scrollbar-track,
        .portfolio-body::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-container::-webkit-scrollbar-thumb,
        .chat-history::-webkit-scrollbar-thumb,
        .portfolio-body::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 2px;
        }

        .chat-container::-webkit-scrollbar-thumb:hover,
        .chat-history::-webkit-scrollbar-thumb:hover,
        .portfolio-body::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: var(--bg-secondary);
            color: var(--text-primary);
            padding: 12px 20px;
            border-radius: var(--radius-md);
            box-shadow: var(--shadow-lg);
            z-index: 3000;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* Swipe hint */
        .swipe-hint {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 40px;
            background: var(--primary-color);
            border-radius: 0 4px 4px 0;
            opacity: 0.7;
            animation: swipeHint 2s infinite;
        }

        @keyframes swipeHint {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body>
    <!-- Landing Page -->
    <div class="landing-page" id="landingPage">
        <div class="landing-header">
            <div class="landing-logo">
                
                <h1>Alex Pandian</h1>
            </div>
        </div>
        
        <div class="landing-content">
            <div class="landing-hero">
                <div class="landing-avatar">
                    <i class="fas fa-user"></i>
                </div>
                <h2 class="landing-title">Software Developer - Python</h2>
                <p class="landing-subtitle">Passionate about creating innovative AI-powered applications and solving complex problems with clean, efficient code.</p>
                
                <div class="ai-image-container">
                    <img src="https://z-cdn-media.chatglm.cn/files/6d5790d4-11b4-47f4-a549-4e754a42c890_WhatsApp%20Image%202025-10-28%20at%2011.36.06_bf97138f.jpg?auth_key=1793167747-9c8092ed052d4608948f02c39a6e0953-0-3da9722bb1339cf2927b1ca9932bf1ae" alt="Alex AI" class="ai-image">
                </div>
                
                <div class="landing-buttons">
                    <a href="#" class="landing-button portfolio-btn" id="portfolioBtn">
                        <i class="fas fa-briefcase"></i>
                        Alex Portfolio
                    </a>
                    <a href="#" class="landing-button chat-btn" id="chatBtn">
                        <i class="fas fa-robot"></i>
                        Alex AI
                    </a>
                    <a href="https://ai-resume-analyzer-debugger-builder.onrender.com/" target="_blank" class="landing-button projects-btn">
                        <i class="fas fa-project-diagram"></i>
                        Projects
                    </a>
                </div>
            </div>
        </div>
        
        <div class="landing-footer">
            <p>&copy; 2023 Alex Pandian. All rights reserved.</p>
            <div class="social-links">
                <a href="#" class="social-link" title="LinkedIn">
                    <i class="fab fa-linkedin"></i>
                </a>
                <a href="#" class="social-link" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
                <a href="#" class="social-link" title="Twitter">
                    <i class="fab fa-twitter"></i>
                </a>
            </div>
        </div>
        
        <div class="bg-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>
    </div>

    <!-- Chat Application -->
    <div class="container" id="chatApp" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <!-- <div class="logo-icon"></div> -->
                    <h2>Alex AI</h2>
                </div>
                <button class="new-chat-btn" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                    New Chat
                </button>
                <button class="portfolio-btn-sidebar" id="portfolioSidebarBtn">
                    <i class="fas fa-briefcase"></i>
                    Alex Pandian Portfolio
                </button>
            </div>
            
            <div class="chat-history" id="chatHistory">
                <div class="history-title">Recent Chats</div>
                <!-- Chat history will be populated here -->
            </div>
            
            <div class="sidebar-footer">
                <div class="user-section">
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="user-info">
                        <span class="user-name">You</span>
                        <span class="user-status">Free Plan</span>
                    </div>
                    <button class="settings-btn" id="settingsBtn">
                        <i class="fas fa-cog"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Overlay -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- Main Chat Area -->
        <div class="main-content">
            <div class="chat-header">
                <button class="mobile-toggle" id="mobileToggle">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="header-center">
                    <h1>Alex</h1>
                    <div class="status-indicator">
                        <div class="status-dot"></div>
                        <span></span>
                    </div>
                </div>
                <div class="header-actions">
                    <button class="voice-toggle" id="voiceToggle" title="Voice Input">
                        <i class="fas fa-microphone"></i>
                    </button>
                    <button class="export-btn" id="exportBtn" title="Export Chat">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="theme-toggle" id="themeToggle" title="Toggle Theme">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>

            <div class="chat-container" id="chatContainer">
                <div class="welcome-section">
                    <div class="welcome-card">
                        <div class="welcome-icon">
                            <i class="fas fa-robot"></i>
                        </div>
                        <h1>Hello, How can I help you today?</h1>
                        <p>Ask anything, upload files, or take photos for analysis</p>
                        
                        <div class="quick-actions">
                            <div class="action-grid">
                                <div class="action-card" data-prompt="Write a professional email">
                                    <div class="action-icon">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                    <span>Write Email</span>
                                </div>
                                <div class="action-card" data-prompt="Explain quantum computing simply">
                                    <div class="action-icon">
                                        <i class="fas fa-atom"></i>
                                    </div>
                                    <span>Explain Concept</span>
                                </div>
                                <div class="action-card" data-prompt="Write Python code for web scraping">
                                    <div class="action-icon">
                                        <i class="fas fa-code"></i>
                                    </div>
                                    <span>Code Help</span>
                                </div>
                                <div class="action-card" data-prompt="Create a workout plan">
                                    <div class="action-icon">
                                        <i class="fas fa-dumbbell"></i>
                                    </div>
                                    <span>Fitness Plan</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swipe-hint" id="swipeHint"></div>
            </div>

            <div class="input-section">
                <!-- File Preview -->
                <div id="filePreview" class="file-preview"></div>

                <!-- Input Area -->
                <div class="input-container">
                    <div class="input-actions">
                        <button class="action-btn" id="fileBtn" title="Attach File">
                            <i class="fas fa-paperclip"></i>
                        </button>
                        <input type="file" id="fileUpload" multiple accept="image/*,.txt,.pdf,.doc,.docx,.jpg,.jpeg,.png" hidden>
                        
                        <button class="action-btn" id="cameraBtn" title="Take Photo">
                            <i class="fas fa-camera"></i>
                        </button>
                        
                        <button class="action-btn" id="clearBtn" title="Clear Files">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                    
                    <div class="text-input-wrapper">
                        <textarea 
                            id="messageInput" 
                            placeholder="Message Alex..." 
                            rows="1"
                        ></textarea>
                        <button id="sendBtn" class="send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
                
                <div class="disclaimer">
                    <p><i class="fas fa-info-circle"></i> Alex AI may display inaccurate information, so please verify important details.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Camera Modal -->
    <div id="cameraModal" class="modal">
        <div class="modal-content camera-modal">
            <div class="modal-header">
                <h3>Take Photo</h3>
                <button class="close-btn" id="closeCamera">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="camera-container">
                    <video id="video" autoplay playsinline></video>
                    <div class="camera-overlay">
                        <div class="camera-frame"></div>
                    </div>
                </div>
                <canvas id="canvas" hidden></canvas>
            </div>
            <div class="modal-footer">
                <button id="captureBtn" class="btn-primary capture-btn">
                    <i class="fas fa-camera"></i>
                </button>
                <button id="retakeBtn" class="btn-secondary" style="display:none;">
                    <i class="fas fa-redo"></i>
                    Retake
                </button>
            </div>
        </div>
    </div>

    <!-- Portfolio Modal -->
    <div id="portfolioModal" class="modal">
        <div class="modal-content portfolio-modal">
            <div class="modal-header">
                <h3>Alex Pandian Portfolio</h3>
                <button class="close-btn" id="closePortfolio">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="portfolio-body">
                <div class="portfolio-hero">
                    <div class="portfolio-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <h1>Alex Pandian M</h1>
                    <p>Software Developer  Python | AI Enthusiast | Full Stack Developer</p>
                </div>
                
                <div class="portfolio-content">
                    <div class="portfolio-section">
                        <h2><i class="fas fa-user-circle"></i> About Me</h2>
                        <p>I'm a passionate software developer with expertise in Python, Django, Flask, and AI integration. I love creating innovative solutions that bridge the gap between cutting-edge technology and practical user needs. With a strong foundation in both frontend and backend development, I bring ideas to life through clean, efficient code.</p>
                    </div>
                    
                    <div class="portfolio-section">
                        <h2><i class="fas fa-code"></i> Skills</h2>
                        <div class="skills-grid">
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fab fa-python"></i></div>
                                <div class="skill-name">Python</div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fab fa-js"></i></div>
                                <div class="skill-name">JavaScript</div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fab fa-react"></i></div>
                                <div class="skill-name">React</div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fas fa-database"></i></div>
                                <div class="skill-name">Django ORM</div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fas fa-brain"></i></div>
                                <div class="skill-name">AI Integration</div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fab fa-html5"></i></div>
                                <div class="skill-name">HTML/CSS</div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fas fa-camera"></i></div>
                                <div class="skill-name">OpenCV</div>
                            </div>
                            <div class="skill-item">
                                <div class="skill-icon"><i class="fas fa-database"></i></div>
                                <div class="skill-name">MySQL</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="portfolio-section">
                        <h2><i class="fas fa-graduation-cap"></i> Education</h2>
                        <div class="experience-item">
                            <div class="experience-header">
                                <div class="experience-title">Bachelor of Engineering in Computer Science</div>
                                <div class="experience-duration">2021 - 2025</div>
                            </div>
                            <div class="experience-company">University College of Engineering, Dindigul</div>
                            <div class="experience-details">
                                CGPA: 7.3
                            </div>
                        </div>
                    </div>
                    
                    <div class="portfolio-section">
                        <h2><i class="fas fa-certificate"></i> Certifications</h2>
                        <div class="experience-item">
                            <div class="experience-header">
                                <div class="experience-title">Python Fullstack Development Training</div>
                                <div class="experience-duration">2025</div>
                            </div>
                            <div class="experience-company">Codepilot, Chennai</div>
                            <div class="experience-details">
                                Learned Django, Flask, REST APIs, ORM, and deployment.
                            </div>
                        </div>
                        <div class="experience-item">
                            <div class="experience-header">
                                <div class="experience-title">UI and UX Development Internship</div>
                                <div class="experience-duration">2024</div>
                            </div>
                            <div class="experience-company">MITA IT Solutions, Dindigul</div>
                            <div class="experience-details">
                                Learned Frontend, HTML, CSS, Figma tools.
                            </div>
                        </div>
                    </div>
                    
                    <div class="portfolio-section">
                        <h2><i class="fas fa-project-diagram"></i> Projects</h2>
                        <div class="project-item">
                            <div class="project-header">
                                <div class="project-title">AI Resume Analyzer & Debugger</div>
                                <div class="project-tech">Python, Django, Gemini API</div>
                            </div>
                            <div class="project-description">
                                Built an AI-powered resume analysis platform with ATS scoring and improvement suggestions. Integrated authentication, OTP verification, and token-based access. Handled PDF/DOCX parsing and AI-based grammar feedback.
                            </div>
                            <div class="project-links">
                                <a href="https://ai-resume-analyzer-debugger-builder.onrender.com/" target="_blank" class="project-link">
                                    <i class="fas fa-external-link-alt"></i> Live Demo
                                </a>
                                <a href="#" class="project-link" id="downloadResume">
                                    <i class="fas fa-download"></i> Resume
                                </a>
                            </div>
                        </div>
                        <div class="project-item">
                            <div class="project-header">
                                <div class="project-title">Virtual Try-On Clothing E-Commerce</div>
                                <div class="project-tech">Python, OpenCV, Flask, MediaPipe</div>
                            </div>
                            <div class="project-description">
                                Developed a web app for virtual clothing try-on via webcam feed. Implemented real-time overlay and responsive UI with animations. Created user/admin login, product management, cart, and order tracking.
                            </div>
                            <div class="project-links">
                                <a href="#" target="_blank" class="project-link">
                                    <i class="fas fa-external-link-alt"></i> Live Demo
                                </a>
                                <a href="#" target="_blank" class="project-link">
                                    <i class="fab fa-github"></i> GitHub
                                </a>
                            </div>
                        </div>
                        <div class="project-item">
                            <div class="project-header">
                                <div class="project-title">ChatGPT Clone</div>
                                <div class="project-tech">JavaScript, Gemini API, REST API</div>
                            </div>
                            <div class="project-description">
                                Developed a conversational AI system with Django backend and REST APIs. Implemented chat sessions, authentication, and message persistence. Integrated Gemini API for AI-driven responses.
                            </div>
                            <div class="project-links">
                                <a href="#" target="_blank" class="project-link">
                                    <i class="fas fa-external-link-alt"></i> Live Demo
                                </a>
                                <a href="#" target="_blank" class="project-link">
                                    <i class="fab fa-github"></i> GitHub
                                </a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="portfolio-section">
                        <h2><i class="fas fa-envelope"></i> Contact</h2>
                        <div class="contact-info">
                            <div class="contact-item">
                                <i class="fas fa-envelope"></i>
                                <span>pandialex140@gmail.com</span>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-phone"></i>
                                <span>+91 93635 34294</span>
                            </div>
                            <div class="contact-item">
                                <i class="fas fa-map-marker-alt"></i>
                                <span>chenai (native  Madurai),Tamil Nadu, India</span>
                            </div>
                        </div>
                        
                        <div class="contact-form">
                            <h3>Get In Touch</h3>
                            <form id="contactForm">
                                <div class="form-group">
                                    <label for="name">Your Name</label>
                                    <input type="text" id="name" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="email">Your Email</label>
                                    <input type="email" id="email" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="subject">Subject</label>
                                    <input type="text" id="subject" class="form-control" required>
                                </div>
                                <div class="form-group">
                                    <label for="message">Message</label>
                                    <textarea id="message" class="form-control" required></textarea>
                                </div>
                                <button type="submit" class="form-submit">
                                    <i class="fas fa-paper-plane"></i>
                                    Send Message
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="portfolio-footer">
                <a href="#" class="download-btn" id="downloadResumeBtn">
                    <i class="fas fa-download"></i> Download Resume
                </a>
                <div class="social-links">
                    <a href="#" class="social-link" title="LinkedIn">
                        <i class="fab fa-linkedin"></i>
                    </a>
                    <a href="#" class="social-link" title="GitHub">
                        <i class="fab fa-github"></i>
                    </a>
                    <a href="#" class="social-link" title="Twitter">
                        <i class="fab fa-twitter"></i>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script>
        class AlexAIApp {
            constructor() {
                this.apiKey = 'AIzaSyAlD7PxnEM5qFNq1JsOPFgT-sbs8TJqipc';
                this.currentChat = [];
                this.isProcessing = false;
                this.isMobile = this.checkMobile();
                this.touchStartX = 0;
                this.touchEndX = 0;
                this.isRecording = false;
                this.recognition = null;
                
                this.initializeElements();
                this.attachEventListeners();
                this.setupMobileFeatures();
                this.applyTheme();
                this.loadChatHistory();
                this.initializeVoiceRecognition();
            }

            checkMobile() {
                return window.innerWidth <= 768 || 
                       /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            }

            initializeElements() {
                // Landing page elements
                this.landingPage = document.getElementById('landingPage');
                this.chatApp = document.getElementById('chatApp');
                this.portfolioBtn = document.getElementById('portfolioBtn');
                this.chatBtn = document.getElementById('chatBtn');
                
                // Core elements
                this.chatContainer = document.getElementById('chatContainer');
                this.messageInput = document.getElementById('messageInput');
                this.sendBtn = document.getElementById('sendBtn');
                this.fileUpload = document.getElementById('fileUpload');
                this.filePreview = document.getElementById('filePreview');
                this.fileBtn = document.getElementById('fileBtn');
                this.cameraBtn = document.getElementById('cameraBtn');
                this.clearBtn = document.getElementById('clearBtn');
                this.newChatBtn = document.getElementById('newChatBtn');
                this.portfolioSidebarBtn = document.getElementById('portfolioSidebarBtn');
                
                // Mobile elements
                this.mobileToggle = document.getElementById('mobileToggle');
                this.sidebar = document.getElementById('sidebar');
                this.sidebarOverlay = document.getElementById('sidebarOverlay');
                this.themeToggle = document.getElementById('themeToggle');
                this.swipeHint = document.getElementById('swipeHint');
                
                // New features
                this.voiceToggle = document.getElementById('voiceToggle');
                this.exportBtn = document.getElementById('exportBtn');
                this.toast = document.getElementById('toast');
                
                // Portfolio modal elements
                this.portfolioModal = document.getElementById('portfolioModal');
                this.closePortfolio = document.getElementById('closePortfolio');
                this.downloadResumeBtn = document.getElementById('downloadResumeBtn');
                this.downloadResume = document.getElementById('downloadResume');
                this.contactForm = document.getElementById('contactForm');
                
                // Camera elements
                this.cameraModal = document.getElementById('cameraModal');
                this.video = document.getElementById('video');
                this.canvas = document.getElementById('canvas');
                this.captureBtn = document.getElementById('captureBtn');
                this.retakeBtn = document.getElementById('retakeBtn');
                this.closeCamera = document.getElementById('closeCamera');
                
                // State
                this.selectedFiles = [];
                this.stream = null;
                this.sidebarOpen = false;
                this.currentTheme = localStorage.getItem('theme') || 'light';
            }

            setupMobileFeatures() {
                // Handle virtual keyboard
                this.messageInput.addEventListener('focus', () => {
                    if (this.isMobile) {
                        setTimeout(() => this.scrollToBottom(), 100);
                    }
                });

                // Prevent zoom on input focus for iOS
                this.messageInput.addEventListener('touchstart', (e) => {
                    e.stopPropagation();
                }, { passive: true });

                // Handle viewport height changes
                this.setViewportHeight();
                window.addEventListener('resize', () => this.setViewportHeight());
                
                // Setup swipe gestures
                this.setupSwipeGestures();
            }

            setViewportHeight() {
                // Set custom property for dynamic viewport height
                document.documentElement.style.setProperty('--vh', `${window.innerHeight * 0.01}px`);
            }

            setupSwipeGestures() {
                // Touch events for swipe gestures
                document.addEventListener('touchstart', (e) => {
                    this.touchStartX = e.changedTouches[0].screenX;
                }, { passive: true });

                document.addEventListener('touchend', (e) => {
                    this.touchEndX = e.changedTouches[0].screenX;
                    this.handleSwipeGesture();
                }, { passive: true });
            }

            handleSwipeGesture() {
                const swipeThreshold = 50;
                const diff = this.touchStartX - this.touchEndX;
                
                // Swipe right to open sidebar
                if (diff < -swipeThreshold && this.touchStartX < 50 && !this.sidebarOpen) {
                    this.toggleSidebar();
                }
                
                // Swipe left to close sidebar
                if (diff > swipeThreshold && this.sidebarOpen) {
                    this.toggleSidebar();
                }
            }

            initializeVoiceRecognition() {
                if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
                    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
                    this.recognition = new SpeechRecognition();
                    this.recognition.continuous = false;
                    this.recognition.interimResults = true;
                    this.recognition.lang = 'en-US';
                    
                    this.recognition.onstart = () => {
                        this.isRecording = true;
                        this.voiceToggle.classList.add('active');
                        this.showToast('Listening... Speak now');
                        this.showVoiceRecordingIndicator();
                    };
                    
                    this.recognition.onresult = (event) => {
                        const transcript = Array.from(event.results)
                            .map(result => result[0].transcript)
                            .join('');
                        
                        this.messageInput.value = transcript;
                        this.autoResizeTextarea();
                    };
                    
                    this.recognition.onerror = (event) => {
                        this.isRecording = false;
                        this.voiceToggle.classList.remove('active');
                        this.hideVoiceRecordingIndicator();
                        this.showToast(`Error: ${event.error}`);
                    };
                    
                    this.recognition.onend = () => {
                        this.isRecording = false;
                        this.voiceToggle.classList.remove('active');
                        this.hideVoiceRecordingIndicator();
                        
                        // Auto-send if there's content
                        if (this.messageInput.value.trim()) {
                            this.sendMessage();
                        }
                    };
                } else {
                    this.voiceToggle.style.display = 'none';
                }
            }

            showVoiceRecordingIndicator() {
                const indicator = document.createElement('div');
                indicator.className = 'voice-recording';
                indicator.id = 'voiceRecordingIndicator';
                indicator.innerHTML = '<i class="fas fa-microphone"></i> Recording...';
                this.inputSection = document.querySelector('.input-section');
                this.inputSection.appendChild(indicator);
            }

            hideVoiceRecordingIndicator() {
                const indicator = document.getElementById('voiceRecordingIndicator');
                if (indicator) {
                    indicator.remove();
                }
            }

            attachEventListeners() {
                // Landing page buttons
                this.portfolioBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showChatApp();
                    this.openPortfolioModal();
                });
                
                this.chatBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.showChatApp();
                });
                
                // Message sending
                this.sendBtn.addEventListener('click', () => this.sendMessage());
                this.messageInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        this.sendMessage();
                    }
                });

                // Auto-resize textarea
                this.messageInput.addEventListener('input', () => {
                    this.autoResizeTextarea();
                });

                // File handling
                this.fileBtn.addEventListener('click', () => this.fileUpload.click());
                this.fileUpload.addEventListener('change', (e) => this.handleFileSelect(e));
                this.cameraBtn.addEventListener('click', () => this.openCamera());
                this.clearBtn.addEventListener('click', () => this.clearFiles());

                // Camera functionality
                this.captureBtn.addEventListener('click', () => this.capturePhoto());
                this.retakeBtn.addEventListener('click', () => this.retakePhoto());
                this.closeCamera.addEventListener('click', () => this.closeCameraModal());

                // Mobile sidebar
                this.mobileToggle.addEventListener('click', () => this.toggleSidebar());
                this.sidebarOverlay.addEventListener('click', () => this.toggleSidebar());

                // Theme toggle
                this.themeToggle.addEventListener('click', () => this.toggleTheme());

                // Voice toggle
                this.voiceToggle.addEventListener('click', () => this.toggleVoiceRecording());

                // Export chat
                this.exportBtn.addEventListener('click', () => this.exportChat());

                // New chat
                this.newChatBtn.addEventListener('click', () => this.startNewChat());

                // Portfolio button
                this.portfolioSidebarBtn.addEventListener('click', () => this.openPortfolioModal());
                this.closePortfolio.addEventListener('click', () => this.closePortfolioModal());
                
                // Download resume
                this.downloadResumeBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.downloadResumeFile();
                });
                
                this.downloadResume.addEventListener('click', (e) => {
                    e.preventDefault();
                    this.downloadResumeFile();
                });

                // Contact form
                this.contactForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    this.handleContactForm();
                });

                // Quick actions
                document.querySelectorAll('.action-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const prompt = card.getAttribute('data-prompt');
                        this.messageInput.value = prompt;
                        this.messageInput.focus();
                        this.autoResizeTextarea();
                    });
                });

                // Close modal on outside click
                this.cameraModal.addEventListener('click', (e) => {
                    if (e.target === this.cameraModal) {
                        this.closeCameraModal();
                    }
                });
                
                this.portfolioModal.addEventListener('click', (e) => {
                    if (e.target === this.portfolioModal) {
                        this.closePortfolioModal();
                    }
                });

                // Handle orientation changes
                window.addEventListener('orientationchange', () => {
                    setTimeout(() => this.handleOrientationChange(), 300);
                });
            }

            showChatApp() {
                this.landingPage.style.display = 'none';
                this.chatApp.style.display = 'flex';
            }

            autoResizeTextarea() {
                this.messageInput.style.height = 'auto';
                this.messageInput.style.height = Math.min(this.messageInput.scrollHeight, 120) + 'px';
            }

            toggleSidebar() {
                this.sidebarOpen = !this.sidebarOpen;
                this.sidebar.classList.toggle('active');
                this.sidebarOverlay.classList.toggle('active');
                
                // Prevent body scroll when sidebar is open
                document.body.style.overflow = this.sidebarOpen ? 'hidden' : '';
                
                // Hide swipe hint when sidebar is open
                if (this.sidebarOpen) {
                    this.swipeHint.style.display = 'none';
                } else if (this.isMobile) {
                    // Show swipe hint again after a delay
                    setTimeout(() => {
                        this.swipeHint.style.display = 'block';
                    }, 500);
                }
            }

            toggleTheme() {
                this.currentTheme = this.currentTheme === 'light' ? 'dark' : 'light';
                localStorage.setItem('theme', this.currentTheme);
                this.applyTheme();
            }

            applyTheme() {
                document.documentElement.setAttribute('data-theme', this.currentTheme);
                const icon = this.themeToggle.querySelector('i');
                icon.className = this.currentTheme === 'light' ? 'fas fa-moon' : 'fas fa-sun';
            }

            toggleVoiceRecording() {
                if (!this.recognition) {
                    this.showToast('Voice recognition is not supported in your browser');
                    return;
                }
                
                if (this.isRecording) {
                    this.recognition.stop();
                } else {
                    this.recognition.start();
                }
            }

            exportChat() {
                if (this.currentChat.length === 0) {
                    this.showToast('No chat history to export');
                    return;
                }
                
                const chatText = this.currentChat.map(msg => {
                    const timestamp = new Date(msg.timestamp).toLocaleString();
                    const filesText = msg.files && msg.files.length > 0 
                        ? `\n[Attached: ${msg.files.map(f => f.name).join(', ')}]` 
                        : '';
                    return `[${timestamp}] ${msg.role === 'user' ? 'You' : 'Alex AI'}: ${msg.content}${filesText}`;
                }).join('\n\n');
                
                const blob = new Blob([chatText], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `alex-ai-chat-${new Date().toISOString().slice(0, 10)}.txt`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showToast('Chat exported successfully');
            }

            showToast(message) {
                this.toast.textContent = message;
                this.toast.classList.add('show');
                
                setTimeout(() => {
                    this.toast.classList.remove('show');
                }, 3000);
            }

            openPortfolioModal() {
                this.portfolioModal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }

            closePortfolioModal() {
                this.portfolioModal.style.display = 'none';
                document.body.style.overflow = '';
            }

            handleContactForm() {
                const name = document.getElementById('name').value;
                const email = document.getElementById('email').value;
                const subject = document.getElementById('subject').value;
                const message = document.getElementById('message').value;
                
                // In a real application, you would send this data to a server
                // For this demo, we'll just show a success message
                this.showToast(`Thank you, ${name}! Your message has been sent successfully.`);
                
                // Reset the form
                this.contactForm.reset();
            }

            downloadResumeFile() {
                // Create a resume content based on the provided information
                const resumeContent = `
ALEX PANDIAN M
Software Developer  Python | AI Enthusiast | Full Stack Developer

CONTACT
Email: pandialex140@gmail.com
Phone: +91 93635 34294
Location: Dindigul, Tamil Nadu, India

SUMMARY
Fresher Python Developer with strong backend and full-stack skills. Skilled in Django, Flask, React, and REST API development. Hands-on experience with database design, ORM, and AI integration (Gemini API). Passionate about writing clean, scalable code and building real-world projects.

SKILLS
 Programming Languages: Python, JavaScript, HTML, CSS
 Frameworks: Django, Flask, React.js, Bootstrap
 Databases: MySQL, SQLite, PostgreSQL
 Tools: VS Code, PyCharm, Git, GitHub, OpenCV, MediaPipe, Django ORM, Django REST Framework, Postman, Figma, Render

EDUCATION
Bachelor of Engineering in Computer Science and Engineering
University College of Engineering, Dindigul | 2021  2025
CGPA: 7.3

CERTIFICATIONS
 Python Fullstack Development Training  Codepilot, Chennai (2025)
  Learned Django, Flask, REST APIs, ORM, and deployment.
 UI and UX Development Internship  MITA IT Solutions, Dindigul (2024)
  Learned Frontend, HTML, CSS, Figma tools.

PROJECTS
AI Resume Analyzer & Debugger (2025)
 Built an AI-powered resume analysis platform with ATS scoring and improvement suggestions
 Integrated authentication, OTP verification, and token-based access
 Handled PDF/DOCX parsing and AI-based grammar feedback
 Technologies: Python, Django, Gemini API, ORM, Authentication, PyMuPDF, python-docx

Virtual Try-On Clothing E-Commerce (2025)
 Developed a web app for virtual clothing try-on via webcam feed
 Implemented real-time overlay and responsive UI with animations
 Created user/admin login, product management, cart, and order tracking
 Technologies: Python, OpenCV, Flask, MediaPipe, Django ORM, Bootstrap

ChatGPT Clone (2025)
 Developed a conversational AI system with Django backend and REST APIs
 Implemented chat sessions, authentication, and message persistence
 Integrated Gemini API for AI-driven responses
 Technologies: JavaScript, Gemini API, REST API, HTML, CSS

SOFT SKILLS
 Active Listening, Work Ethic, Resilience and Patience, Teamwork and Collaboration
                `;
                
                const blob = new Blob([resumeContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'Alex_Pandian_Resume.txt';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                this.showToast('Resume downloaded successfully');
            }

            handleOrientationChange() {
                // Re-initialize camera on orientation change
                if (this.cameraModal.style.display === 'block') {
                    this.closeCameraModal();
                    setTimeout(() => this.openCamera(), 500);
                }
                
                // Update mobile detection
                this.isMobile = this.checkMobile();
            }

            async sendMessage() {
                const query = this.messageInput.value.trim();
                const hasFiles = this.selectedFiles.length > 0;

                if ((!query && !hasFiles) || this.isProcessing) {
                    return;
                }

                this.isProcessing = true;
                this.sendBtn.disabled = true;
                this.updateSendButton();

                // Add user message to chat
                this.addMessage('user', query, this.selectedFiles);
                this.messageInput.value = '';
                this.clearFiles();
                this.autoResizeTextarea();

                // Show typing indicator
                this.showTypingIndicator();

                // Close sidebar on mobile
                if (this.isMobile && this.sidebarOpen) {
                    this.toggleSidebar();
                }

                try {
                    const response = await this.callAlexAPI(query, this.selectedFiles);
                    this.removeTypingIndicator();
                    this.addMessage('assistant', response);
                } catch (error) {
                    this.removeTypingIndicator();
                    this.addMessage('assistant', `Sorry, I encountered an error: ${error.message}`);
                    console.error('API Error:', error);
                }

                this.isProcessing = false;
                this.sendBtn.disabled = false;
                this.updateSendButton();
                this.saveChatHistory();
            }

            updateSendButton() {
                const icon = this.sendBtn.querySelector('i');
                if (this.isProcessing) {
                    icon.className = 'fas fa-spinner fa-spin';
                } else {
                    icon.className = 'fas fa-paper-plane';
                }
            }

            async callAlexAPI(query, files = []) {
                const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${this.apiKey}`;

                const parts = [];

                if (query) {
                    parts.push({ text: query });
                }

                for (const file of files) {
                    if (file.type.startsWith('image/')) {
                        const base64 = await this.fileToBase64(file);
                        parts.push({
                            inline_data: {
                                mime_type: file.type,
                                data: base64.split(',')[1]
                            }
                        });
                    } else if (file.type === 'text/plain') {
                        const text = await this.readTextFile(file);
                        parts.push({ text: `File: ${file.name}\nContent: ${text}` });
                    }
                }

                const requestBody = {
                    contents: [{
                        parts: parts
                    }]
                };

                const controller = new AbortController();
                const timeoutId = setTimeout(() => controller.abort(), 30000);

                try {
                    const response = await fetch(API_URL, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify(requestBody),
                        signal: controller.signal
                    });

                    clearTimeout(timeoutId);

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error?.message || 'API request failed');
                    }

                    const data = await response.json();
                    return data.candidates[0].content.parts[0].text;
                } catch (error) {
                    clearTimeout(timeoutId);
                    if (error.name === 'AbortError') {
                        throw new Error('Request timeout. Please check your connection.');
                    }
                    throw error;
                }
            }

            addMessage(role, content, files = []) {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${role}`;
                
                const avatar = document.createElement('div');
                avatar.className = 'avatar';
                avatar.innerHTML = role === 'user' ? '<i class="fas fa-user"></i>' : '<i class="fas fa-robot"></i>';
                
                const contentDiv = document.createElement('div');
                contentDiv.className = 'message-content';
                
                if (content) {
                    contentDiv.innerHTML = this.formatMessage(content);
                }
                
                if (files.length > 0 && role === 'user') {
                    files.forEach(file => {
                        if (file.type.startsWith('image/')) {
                            const img = document.createElement('img');
                            img.src = URL.createObjectURL(file);
                            img.alt = file.name;
                            img.loading = 'lazy';
                            contentDiv.appendChild(img);
                        } else {
                            const fileSpan = document.createElement('span');
                            fileSpan.className = 'file-preview-item';
                            fileSpan.innerHTML = `
                                <i class="fas fa-file"></i>
                                ${this.truncateFilename(file.name)}
                            `;
                            contentDiv.appendChild(fileSpan);
                        }
                    });
                }
                
                // Add message actions
                const actionsDiv = document.createElement('div');
                actionsDiv.className = 'message-actions';
                
                const copyBtn = document.createElement('button');
                copyBtn.className = 'message-action-btn';
                copyBtn.innerHTML = '<i class="fas fa-copy"></i>';
                copyBtn.title = 'Copy';
                copyBtn.addEventListener('click', () => this.copyMessage(content));
                
                const speakBtn = document.createElement('button');
                speakBtn.className = 'message-action-btn';
                speakBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                speakBtn.title = 'Speak';
                speakBtn.addEventListener('click', () => this.speakMessage(content));
                
                actionsDiv.appendChild(copyBtn);
                if (role === 'assistant') {
                    actionsDiv.appendChild(speakBtn);
                }
                
                // Add timestamp
                const timestampDiv = document.createElement('div');
                timestampDiv.className = 'message-timestamp';
                timestampDiv.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                
                messageDiv.appendChild(avatar);
                messageDiv.appendChild(contentDiv);
                contentDiv.appendChild(actionsDiv);
                contentDiv.appendChild(timestampDiv);
                this.chatContainer.appendChild(messageDiv);
                
                // Remove welcome message if it's the first message
                const welcomeSection = document.querySelector('.welcome-section');
                if (welcomeSection && this.currentChat.length === 0) {
                    welcomeSection.remove();
                    this.swipeHint.style.display = 'none';
                }
                
                this.scrollToBottom();
                this.currentChat.push({ role, content, files, timestamp: new Date().toISOString() });
            }

            formatMessage(content) {
                return content
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/\*(.*?)\*/g, '<em>$1</em>')
                    .replace(/`(.*?)`/g, '<code>$1</code>')
                    .replace(/\n/g, '<br>');
            }

            copyMessage(content) {
                navigator.clipboard.writeText(content).then(() => {
                    this.showToast('Message copied to clipboard');
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    this.showToast('Failed to copy message');
                });
            }

            speakMessage(content) {
                if ('speechSynthesis' in window) {
                    // Cancel any ongoing speech
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(content);
                    utterance.rate = 0.9;
                    utterance.pitch = 1;
                    utterance.volume = 1;
                    
                    window.speechSynthesis.speak(utterance);
                    this.showToast('Speaking message...');
                } else {
                    this.showToast('Text-to-speech is not supported in your browser');
                }
            }

            showTypingIndicator() {
                const typingDiv = document.createElement('div');
                typingDiv.className = 'message assistant';
                typingDiv.id = 'typing-indicator';
                
                typingDiv.innerHTML = `
                    <div class="avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">
                        <div class="typing-indicator">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                `;
                
                this.chatContainer.appendChild(typingDiv);
                this.scrollToBottom();
            }

            removeTypingIndicator() {
                const typingIndicator = document.getElementById('typing-indicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            }

            handleFileSelect(event) {
                const files = Array.from(event.target.files);
                this.selectedFiles = [...this.selectedFiles, ...files];
                this.updateFilePreview();
            }

            updateFilePreview() {
                this.filePreview.innerHTML = '';
                this.selectedFiles.forEach((file, index) => {
                    const fileItem = document.createElement('div');
                    fileItem.className = 'file-preview-item';
                    fileItem.innerHTML = `
                        <i class="fas ${file.type.startsWith('image/') ? 'fa-image' : 'fa-file'}"></i>
                        ${this.truncateFilename(file.name)}
                        <button class="remove-btn" onclick="alexChat.removeFile(${index})">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                    this.filePreview.appendChild(fileItem);
                });
            }

            truncateFilename(filename) {
                if (this.isMobile && filename.length > 15) {
                    return filename.substring(0, 12) + '...';
                }
                return filename;
            }

            removeFile(index) {
                this.selectedFiles.splice(index, 1);
                this.updateFilePreview();
            }

            clearFiles() {
                this.selectedFiles = [];
                this.filePreview.innerHTML = '';
                this.fileUpload.value = '';
            }

            async openCamera() {
                this.cameraModal.style.display = 'flex';
                
                try {
                    const constraints = {
                        video: { 
                            facingMode: 'environment',
                            width: { ideal: 1920 },
                            height: { ideal: 1080 }
                        } 
                    };
                    
                    this.stream = await navigator.mediaDevices.getUserMedia(constraints);
                    this.video.srcObject = this.stream;
                    this.captureBtn.style.display = 'flex';
                    this.retakeBtn.style.display = 'none';
                    
                    // Handle mobile orientation
                    if (this.isMobile) {
                        this.video.setAttribute('playsinline', 'true');
                    }
                } catch (error) {
                    alert('Camera access denied or not available: ' + error.message);
                    this.closeCameraModal();
                }
            }

            capturePhoto() {
                const context = this.canvas.getContext('2d');
                this.canvas.width = this.video.videoWidth;
                this.canvas.height = this.video.videoHeight;
                context.drawImage(this.video, 0, 0);
                
                this.canvas.toBlob((blob) => {
                    const file = new File([blob], `photo-${Date.now()}.jpg`, { type: 'image/jpeg' });
                    this.selectedFiles.push(file);
                    this.updateFilePreview();
                    this.closeCameraModal();
                    
                    setTimeout(() => {
                        this.messageInput.focus();
                    }, 300);
                }, 'image/jpeg', 0.8);
            }

            retakePhoto() {
                this.captureBtn.style.display = 'flex';
                this.retakeBtn.style.display = 'none';
            }

            closeCameraModal() {
                this.cameraModal.style.display = 'none';
                if (this.stream) {
                    this.stream.getTracks().forEach(track => track.stop());
                }
            }

            startNewChat() {
                this.currentChat = [];
                this.chatContainer.innerHTML = `
                    <div class="welcome-section">
                        <div class="welcome-card">
                            <div class="welcome-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <h1>Hello, How can I help you today?</h1>
                            <p>Ask anything, upload files, or take photos for analysis</p>
                            
                            <div class="quick-actions">
                                <div class="action-grid">
                                    <div class="action-card" data-prompt="Write a professional email">
                                        <div class="action-icon">
                                            <i class="fas fa-envelope"></i>
                                        </div>
                                        <span>Write Email</span>
                                    </div>
                                    <div class="action-card" data-prompt="Explain quantum computing simply">
                                        <div class="action-icon">
                                            <i class="fas fa-atom"></i>
                                        </div>
                                        <span>Explain Concept</span>
                                    </div>
                                    <div class="action-card" data-prompt="Write Python code for web scraping">
                                        <div class="action-icon">
                                            <i class="fas fa-code"></i>
                                        </div>
                                        <span>Code Help</span>
                                    </div>
                                    <div class="action-card" data-prompt="Create a workout plan">
                                        <div class="action-icon">
                                            <i class="fas fa-dumbbell"></i>
                                        </div>
                                        <span>Fitness Plan</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="swipe-hint" id="swipeHint"></div>
                `;
                
                // Reattach event listeners
                document.querySelectorAll('.action-card').forEach(card => {
                    card.addEventListener('click', () => {
                        const prompt = card.getAttribute('data-prompt');
                        this.messageInput.value = prompt;
                        this.messageInput.focus();
                        this.autoResizeTextarea();
                    });
                });
                
                // Reinitialize swipe hint
                this.swipeHint = document.getElementById('swipeHint');
                
                this.saveChatHistory();
                
                if (this.isMobile) {
                    this.toggleSidebar();
                }
            }

            saveChatHistory() {
                const history = {
                    timestamp: new Date().toISOString(),
                    chat: this.currentChat
                };
                localStorage.setItem('alex_ai_chat_history', JSON.stringify(history));
            }

            loadChatHistory() {
                const saved = localStorage.getItem('alex_ai_chat_history');
                if (saved) {
                    try {
                        const history = JSON.parse(saved);
                        this.currentChat = history.chat || [];
                        
                        if (this.currentChat.length > 0) {
                            const welcomeSection = document.querySelector('.welcome-section');
                            if (welcomeSection) {
                                welcomeSection.remove();
                                this.swipeHint.style.display = 'none';
                            }
                            
                            this.currentChat.forEach(msg => {
                                this.addMessage(msg.role, msg.content, msg.files || []);
                            });
                        }
                    } catch (error) {
                        console.error('Error loading chat history:', error);
                    }
                }
            }

            scrollToBottom() {
                setTimeout(() => {
                    this.chatContainer.scrollTop = this.chatContainer.scrollHeight;
                }, 100);
            }

            // Utility functions
            fileToBase64(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = () => resolve(reader.result);
                    reader.onerror = reject;
                    reader.readAsDataURL(file);
                });
            }

            readTextFile(file) {
                return new Promise((resolve, reject) => {
                    const reader = new FileReader();
                    reader.onload = () => resolve(reader.result);
                    reader.onerror = reject;
                    reader.readAsText(file);
                });
            }
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            window.alexChat = new AlexAIApp();
        });

        // Handle page visibility changes
        document.addEventListener('visibilitychange', () => {
            if (document.hidden && window.alexChat && window.alexChat.stream) {
                window.alexChat.closeCameraModal();
            }
        });

        // Handle beforeunload
        window.addEventListener('beforeunload', () => {
            if (window.alexChat && window.alexChat.stream) {
                window.alexChat.closeCameraModal();
            }
        });
    </script>
</body>
</html>

